<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    <script src='https://blog.meekdai.com/Gmeek/plugins/GmeekVercount.js'></script>
    <link rel="icon" href="https://img.icons8.com/?size=100&id=4BkGYLNgxVfC&format=png&color=000000"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="# 微信小程序+MQTT连接

## 微信小程序

### 1 注册微信小程序账号

```python
# 1 访问微信公众平台，注册一个微信小程序账号
	-https://mp.weixin.qq.com/
        
# 2 重点：注册使用邮箱注册
	未被微信公众平台注册，未被微信开放平台注册，未被个人微信号绑定的邮箱
```

### 2 创建微信小程序项目

#### 2.1 创建项目流程（开发者）

```python
# 1 获取 小程序id
	-小程序后台--》开发--》开发管理--》开发设置--》开发者ID
    -AppID(小程序ID)	     wx539e097341fc7588
    
    
# 2 下载微信开发者工具--》这个工具必须联网才能使用
	-下载地址：https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html
    -wechat_devtools_1.06.2402040_win32_x64.exe
    
# 3 一路下一步安装--》桌面有个快捷方式
	-微信开发者工具就等同于 pycharm
	
```





![image-20240401204708959](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401204708959.png)

![image-20240401204843951](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401204843951.png)

![image-20240401171756755](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401171756755.png)

![image-20240401171823876](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401171823876.png)

![image-20240401205141964](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401205141964.png)

#### 2.2 创建项目

```python
# 1 双击 微信开发者工具

# 2 微信扫码--》登录

# 3 创建项目
	-填写名字
    -路径
    -APPID
    -不使用云开发【使用腾讯云的云函数，服务器等等，需要花钱】
    -不使用模版
    	-可以选择js基础版--》别的别选了
        	-TS：咱们不会
            -其他模版功能比较复杂对新手不友好
            
            
# 4 基础设置
	-设置--》编辑器设置--》改变字体大小
    -视图--》外观--》移动模拟器位置
    -可以勾选掉不显示：模拟器，调试器等
```

![image-20240401172015541](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401172015541.png)

![image-20240401172035213](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401172035213.png)

![image-20240401172457001](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401172457001.png)

![image-20240401173007494](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401173007494.png)

![image-20240401173252969](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401173252969.png)



![image-20240401210031630](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401210031630.png)

#### 2.3 本地开发支持http

```python
# -微信小程序默认不支持http、wss--》修改一下--》微信小程序配置
    	-让小程序支持 http wss 协议
```

![image-20240401212012755](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401212012755.png)

### 3 项目目录结构

#### 3.1 项目目录结构

#### 3.1.1 目录介绍

```python
# 1 项目主配置文件，在项目根路径下，控制整个项目的
	-app.js    # 小程序入口文件，小程序启动，会执行这个js
    -app.json  # 小程序的全局配置：顶部的颜色，标题。">
<meta property="og:title" content="微信小程序+MQTT连接">
<meta property="og:description" content="# 微信小程序+MQTT连接

## 微信小程序

### 1 注册微信小程序账号

```python
# 1 访问微信公众平台，注册一个微信小程序账号
	-https://mp.weixin.qq.com/
        
# 2 重点：注册使用邮箱注册
	未被微信公众平台注册，未被微信开放平台注册，未被个人微信号绑定的邮箱
```

### 2 创建微信小程序项目

#### 2.1 创建项目流程（开发者）

```python
# 1 获取 小程序id
	-小程序后台--》开发--》开发管理--》开发设置--》开发者ID
    -AppID(小程序ID)	     wx539e097341fc7588
    
    
# 2 下载微信开发者工具--》这个工具必须联网才能使用
	-下载地址：https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html
    -wechat_devtools_1.06.2402040_win32_x64.exe
    
# 3 一路下一步安装--》桌面有个快捷方式
	-微信开发者工具就等同于 pycharm
	
```





![image-20240401204708959](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401204708959.png)

![image-20240401204843951](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401204843951.png)

![image-20240401171756755](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401171756755.png)

![image-20240401171823876](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401171823876.png)

![image-20240401205141964](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401205141964.png)

#### 2.2 创建项目

```python
# 1 双击 微信开发者工具

# 2 微信扫码--》登录

# 3 创建项目
	-填写名字
    -路径
    -APPID
    -不使用云开发【使用腾讯云的云函数，服务器等等，需要花钱】
    -不使用模版
    	-可以选择js基础版--》别的别选了
        	-TS：咱们不会
            -其他模版功能比较复杂对新手不友好
            
            
# 4 基础设置
	-设置--》编辑器设置--》改变字体大小
    -视图--》外观--》移动模拟器位置
    -可以勾选掉不显示：模拟器，调试器等
```

![image-20240401172015541](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401172015541.png)

![image-20240401172035213](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401172035213.png)

![image-20240401172457001](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401172457001.png)

![image-20240401173007494](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401173007494.png)

![image-20240401173252969](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401173252969.png)



![image-20240401210031630](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401210031630.png)

#### 2.3 本地开发支持http

```python
# -微信小程序默认不支持http、wss--》修改一下--》微信小程序配置
    	-让小程序支持 http wss 协议
```

![image-20240401212012755](https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401212012755.png)

### 3 项目目录结构

#### 3.1 项目目录结构

#### 3.1.1 目录介绍

```python
# 1 项目主配置文件，在项目根路径下，控制整个项目的
	-app.js    # 小程序入口文件，小程序启动，会执行这个js
    -app.json  # 小程序的全局配置：顶部的颜色，标题。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://OnHaiping.github.io/blogs/post/wei-xin-xiao-cheng-xu-%2BMQTT-lian-jie.html">
<meta property="og:image" content="https://onhaiping.github.io/blogs/icon/%E4%B8%89%E6%AF%9B.jpg">
<title>微信小程序+MQTT连接</title>
<link href="//unpkg.com/@wooorm/starry-night@2.1.1/style/both.css" rel="stylesheet" />


</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>




<body>
    <div id="header">
<h1 class="postTitle">微信小程序+MQTT连接</h1>
<div class="title-right">
    <a href="https://OnHaiping.github.io/blogs" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/OnHaiping/blogs/issues/8" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h1>微信小程序+MQTT连接</h1>
<h2>微信小程序</h2>
<h3>1 注册微信小程序账号</h3>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># 1 访问微信公众平台，注册一个微信小程序账号</span>
	<span class="pl-c1">-</span><span class="pl-s1">https</span>:<span class="pl-c1">//</span><span class="pl-s1">mp</span>.<span class="pl-s1">weixin</span>.<span class="pl-s1">qq</span>.<span class="pl-s1">com</span><span class="pl-c1">/</span>
        
<span class="pl-c"># 2 重点：注册使用邮箱注册</span>
	<span class="pl-s1">未被微信公众平台注册</span>，<span class="pl-s1">未被微信开放平台注册</span>，<span class="pl-s1">未被个人微信号绑定的邮箱</span></pre></div>
<h3>2 创建微信小程序项目</h3>
<h4>2.1 创建项目流程（开发者）</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># 1 获取 小程序id</span>
	<span class="pl-c1">-</span><span class="pl-s1">小程序后台</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">开发</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">开发管理</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">开发设置</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">开发者ID</span>
    <span class="pl-c1">-</span><span class="pl-v">AppID</span>(<span class="pl-s1">小程序ID</span>)	     <span class="pl-s1">wx539e097341fc7588</span>
    
    
<span class="pl-c"># 2 下载微信开发者工具--》这个工具必须联网才能使用</span>
	<span class="pl-c1">-</span><span class="pl-s1">下载地址</span>：<span class="pl-s1">https</span>:<span class="pl-c1">//</span><span class="pl-s1">developers</span>.<span class="pl-s1">weixin</span>.<span class="pl-s1">qq</span>.<span class="pl-s1">com</span><span class="pl-c1">/</span><span class="pl-s1">miniprogram</span><span class="pl-c1">/</span><span class="pl-s1">dev</span><span class="pl-c1">/</span><span class="pl-s1">devtools</span><span class="pl-c1">/</span><span class="pl-s1">stable</span>.<span class="pl-s1">html</span>
    <span class="pl-c1">-</span><span class="pl-s1">wechat_devtools_1</span>.<span class="pl-c1">06.2402040_</span><span class="pl-s1">win32_x64</span>.<span class="pl-s1">exe</span>
    
<span class="pl-c"># 3 一路下一步安装--》桌面有个快捷方式</span>
	<span class="pl-c1">-</span><span class="pl-s1">微信开发者工具就等同于</span> <span class="pl-s1">pycharm</span>
	</pre></div>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/788dbc147aac10ada20044d934eb2df46d25b181e14f91f7588622f787e6a3c8/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313230343730383935392e706e67"><img src="https://camo.githubusercontent.com/788dbc147aac10ada20044d934eb2df46d25b181e14f91f7588622f787e6a3c8/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313230343730383935392e706e67" alt="image-20240401204708959" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401204708959.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/e3222203791718e19cabf4fb82e175f833e32b7fcdc151b8d955145e22b63298/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313230343834333935312e706e67"><img src="https://camo.githubusercontent.com/e3222203791718e19cabf4fb82e175f833e32b7fcdc151b8d955145e22b63298/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313230343834333935312e706e67" alt="image-20240401204843951" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401204843951.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/c653eb562d4bb14df55b48e7a401b0f8355bc9422f3b8d0990b7ce8faba2ef5a/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137313735363735352e706e67"><img src="https://camo.githubusercontent.com/c653eb562d4bb14df55b48e7a401b0f8355bc9422f3b8d0990b7ce8faba2ef5a/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137313735363735352e706e67" alt="image-20240401171756755" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401171756755.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/006fa9edde8393be01b573ff59ac2f8ee4d78bcf484d356ae19a39f7fcb3abf4/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137313832333837362e706e67"><img src="https://camo.githubusercontent.com/006fa9edde8393be01b573ff59ac2f8ee4d78bcf484d356ae19a39f7fcb3abf4/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137313832333837362e706e67" alt="image-20240401171823876" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401171823876.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/0f07205d8abb943290752c1606f491d4faf0129a67b6863e1c3ca0f4ac53a4fd/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313230353134313936342e706e67"><img src="https://camo.githubusercontent.com/0f07205d8abb943290752c1606f491d4faf0129a67b6863e1c3ca0f4ac53a4fd/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313230353134313936342e706e67" alt="image-20240401205141964" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401205141964.png" style="max-width: 100%;"></a></p>
<h4>2.2 创建项目</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># 1 双击 微信开发者工具</span>

<span class="pl-c"># 2 微信扫码--》登录</span>

<span class="pl-c"># 3 创建项目</span>
	<span class="pl-c1">-</span><span class="pl-s1">填写名字</span>
    <span class="pl-c1">-</span><span class="pl-s1">路径</span>
    <span class="pl-c1">-</span><span class="pl-v">APPID</span>
    <span class="pl-c1">-</span><span class="pl-s1">不使用云开发</span>【<span class="pl-s1">使用腾讯云的云函数</span>，<span class="pl-s1">服务器等等</span>，<span class="pl-s1">需要花钱</span>】
    <span class="pl-c1">-</span><span class="pl-s1">不使用模版</span>
    	<span class="pl-c1">-</span><span class="pl-s1">可以选择js基础版</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">别的别选了</span>
        	<span class="pl-c1">-</span><span class="pl-v">TS</span>：<span class="pl-s1">咱们不会</span>
            <span class="pl-c1">-</span><span class="pl-s1">其他模版功能比较复杂对新手不友好</span>
            
            
<span class="pl-c"># 4 基础设置</span>
	<span class="pl-c1">-</span><span class="pl-s1">设置</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">编辑器设置</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">改变字体大小</span>
    <span class="pl-c1">-</span><span class="pl-s1">视图</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">外观</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">移动模拟器位置</span>
    <span class="pl-c1">-</span><span class="pl-s1">可以勾选掉不显示</span>：<span class="pl-s1">模拟器</span>，<span class="pl-s1">调试器等</span></pre></div>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/87253f36c654d93e17133cf9ec82174dab3e4e1ea9e0d04ca309b60fad92b807/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137323031353534312e706e67"><img src="https://camo.githubusercontent.com/87253f36c654d93e17133cf9ec82174dab3e4e1ea9e0d04ca309b60fad92b807/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137323031353534312e706e67" alt="image-20240401172015541" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401172015541.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/936f1741aea2d1a3c37f3fccec2272956223eff2fe5bf71a4297f4947c36ff2e/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137323033353231332e706e67"><img src="https://camo.githubusercontent.com/936f1741aea2d1a3c37f3fccec2272956223eff2fe5bf71a4297f4947c36ff2e/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137323033353231332e706e67" alt="image-20240401172035213" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401172035213.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/8ba8c742024569e7cb2ce7e39b2f41ba7a7149c828fbef41a935ae792f4d0305/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137323435373030312e706e67"><img src="https://camo.githubusercontent.com/8ba8c742024569e7cb2ce7e39b2f41ba7a7149c828fbef41a935ae792f4d0305/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137323435373030312e706e67" alt="image-20240401172457001" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401172457001.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/1cda1b30d4c14813ca297a2679a4505a835c196c362d809b104ed4c34399372b/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137333030373439342e706e67"><img src="https://camo.githubusercontent.com/1cda1b30d4c14813ca297a2679a4505a835c196c362d809b104ed4c34399372b/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137333030373439342e706e67" alt="image-20240401173007494" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401173007494.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/193e0f6bf08e8d115d92a340c37d01b05a013d520bd9d34148e11ceaaa8872d5/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137333235323936392e706e67"><img src="https://camo.githubusercontent.com/193e0f6bf08e8d115d92a340c37d01b05a013d520bd9d34148e11ceaaa8872d5/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313137333235323936392e706e67" alt="image-20240401173252969" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401173252969.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/9697012cc6f654c17622390aad4dad9053371870eb4fd8c4d52b7c38f74d223e/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313231303033313633302e706e67"><img src="https://camo.githubusercontent.com/9697012cc6f654c17622390aad4dad9053371870eb4fd8c4d52b7c38f74d223e/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313231303033313633302e706e67" alt="image-20240401210031630" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401210031630.png" style="max-width: 100%;"></a></p>
<h4>2.3 本地开发支持http</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># -微信小程序默认不支持http、wss--》修改一下--》微信小程序配置</span>
    	<span class="pl-c1">-</span><span class="pl-s1">让小程序支持</span> <span class="pl-s1">http</span> <span class="pl-s1">wss</span> <span class="pl-s1">协议</span></pre></div>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/9933a8b26ce11244dae38c79f76ec8338df992d5eca94ea4566aa24a99d942c4/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313231323031323735352e706e67"><img src="https://camo.githubusercontent.com/9933a8b26ce11244dae38c79f76ec8338df992d5eca94ea4566aa24a99d942c4/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313231323031323735352e706e67" alt="image-20240401212012755" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401212012755.png" style="max-width: 100%;"></a></p>
<h3>3 项目目录结构</h3>
<h4>3.1 项目目录结构</h4>
<h4>3.1.1 目录介绍</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># 1 项目主配置文件，在项目根路径下，控制整个项目的</span>
	<span class="pl-c1">-</span><span class="pl-s1">app</span>.<span class="pl-s1">js</span>    <span class="pl-c"># 小程序入口文件，小程序启动，会执行这个js</span>
    <span class="pl-c1">-</span><span class="pl-s1">app</span>.<span class="pl-s1">json</span>  <span class="pl-c"># 小程序的全局配置：顶部的颜色，标题。。。</span>
    <span class="pl-c1">-</span><span class="pl-s1">app</span>.<span class="pl-s1">wxss</span>  <span class="pl-c"># 小程序全局样式：所有样式，全局生效</span>
    
    <span class="pl-c"># app.js 和app.json 必须有，没有不行</span>
    
    
<span class="pl-c"># 2 页面文件</span>
	<span class="pl-c1">-</span><span class="pl-s1">pages文件夹下</span>，<span class="pl-s1">有一个个的文件夹</span>（<span class="pl-s1">index</span>,<span class="pl-s1">login</span>,<span class="pl-s1">register</span>）<span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">&gt;</span><span class="pl-s1">每个文件夹下有4个文件</span>
    	<span class="pl-c1">-</span><span class="pl-s1">xx</span>.<span class="pl-s1">js</span>     <span class="pl-c"># 页面逻辑，js代码控制</span>
        <span class="pl-c1">-</span><span class="pl-s1">xx</span>.<span class="pl-s1">wxml</span>   <span class="pl-c"># 页面结构，布局，html---》wxml就等同于html，但标签有些区别</span>
        <span class="pl-c1">-</span><span class="pl-s1">xx</span>.<span class="pl-s1">json</span>   <span class="pl-c"># 页面配置，当前页面顶部颜色，标题。。</span>
        <span class="pl-c1">-</span><span class="pl-s1">xx</span>.<span class="pl-s1">wxss</span>   <span class="pl-c"># 页面的样式，如果全局样式也有，以当前页面为准</span>
    <span class="pl-c"># xx.js和xx.wxml 必须得，不能没有</span>
    
    
<span class="pl-c"># 3 其他的不重要</span></pre></div>
<div class="highlight highlight-source-python"><pre class="notranslate">├── <span class="pl-s1">components</span>                  【<span class="pl-s1">页面中使用的组件</span>】
├── <span class="pl-s1">pages</span>   					【<span class="pl-s1">页面文件目录</span>】
│   ├── <span class="pl-s1">index</span>					【<span class="pl-s1">页面</span>】
│   │   ├── <span class="pl-s1">index</span>.<span class="pl-s1">js</span>				【<span class="pl-s1">页面JS</span>】
│   │   ├── <span class="pl-s1">index</span>.<span class="pl-s1">json</span>				【<span class="pl-s1">页面配置</span>】
│   │   ├── <span class="pl-s1">index</span>.<span class="pl-s1">wxml</span>				【<span class="pl-s1">页面HTML</span>】
│   │   └── <span class="pl-s1">index</span>.<span class="pl-s1">wxss</span>				【<span class="pl-s1">页面CSS</span>】
│   └── <span class="pl-s1">logs</span>					【<span class="pl-s1">页面</span>】
│       ├── <span class="pl-s1">logs</span>.<span class="pl-s1">js</span>					...
│       ├── <span class="pl-s1">logs</span>.<span class="pl-s1">json</span>				...
│       ├── <span class="pl-s1">logs</span>.<span class="pl-s1">wxml</span>				...
│       └── <span class="pl-s1">logs</span>.<span class="pl-s1">wxss</span>				...
├── <span class="pl-s1">utils</span>						【<span class="pl-s1">自定义工具</span>】
│	└── <span class="pl-s1">utils</span>.<span class="pl-s1">js</span>					【<span class="pl-s1">功能的定义</span>】
├── <span class="pl-s1">app</span>.<span class="pl-s1">js</span>						【<span class="pl-s1">全局JS</span>】
├── <span class="pl-s1">app</span>.<span class="pl-s1">json</span>					【<span class="pl-s1">全局配置</span>】
├── <span class="pl-s1">app</span>.<span class="pl-s1">wxss</span>					【<span class="pl-s1">全局CSS</span>】
├── <span class="pl-s1">project</span>.<span class="pl-s1">config</span>.<span class="pl-s1">json</span>			【<span class="pl-s1">开发者工具默认配置</span>】
├── <span class="pl-s1">project</span>.<span class="pl-s1">private</span>.<span class="pl-s1">config</span>.<span class="pl-s1">json</span>	【<span class="pl-s1">开发者工具用户配置</span>,<span class="pl-s1">在这里修改</span>，<span class="pl-s1">优先用这个</span>，<span class="pl-s1">可以删除</span>】
├── .<span class="pl-s1">eslintrc</span>.<span class="pl-s1">js</span>				【<span class="pl-v">ESlint语法检查配置</span>】
├── <span class="pl-s1">sitemap</span>.<span class="pl-s1">json</span>				【<span class="pl-s1">微信收录页面</span>，<span class="pl-s1">用于搜索</span>，<span class="pl-s1">上线后</span>，<span class="pl-s1">搜索关键字就可以搜到我们</span>】</pre></div>
<h4>3.1.2 配置文件</h4>
<h5>3.1.2.1 项目配置app.json</h5>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c">#1 小程序全局配置文件，用于配置小程序的一些全局属性和页面路由,默认标题，顶部颜色，是否有下拉刷新。。</span>

<span class="pl-c">#2 配置参考地址</span>
<span class="pl-s1">https</span>:<span class="pl-c1">//</span><span class="pl-s1">developers</span>.<span class="pl-s1">weixin</span>.<span class="pl-s1">qq</span>.<span class="pl-s1">com</span><span class="pl-c1">/</span><span class="pl-s1">miniprogram</span><span class="pl-c1">/</span><span class="pl-s1">dev</span><span class="pl-c1">/</span><span class="pl-s1">reference</span><span class="pl-c1">/</span><span class="pl-s1">configuration</span><span class="pl-c1">/</span><span class="pl-s1">app</span>.<span class="pl-s1">html</span>
    
    
<span class="pl-c"># 3 部分参数演示</span>
    <span class="pl-s1">entryPagePath</span>：<span class="pl-s1">小程序默认启动首页</span>	
    <span class="pl-s1">pages</span>: <span class="pl-s1">小程序总共有多少个页面</span>
    <span class="pl-s1">window</span>：<span class="pl-s1">全局的默认窗口表现</span>，<span class="pl-s1">顶部颜色</span>，<span class="pl-s1">是否有下拉</span>，<span class="pl-s1">它控制很多东西</span>，<span class="pl-s1">这个经常用</span></pre></div>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/2a68b435aa20fb9e2f3b510fdf38465fa0c77699febc90249aa2494749431759/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313231333632373531332e706e67"><img src="https://camo.githubusercontent.com/2a68b435aa20fb9e2f3b510fdf38465fa0c77699febc90249aa2494749431759/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313231333632373531332e706e67" alt="image-20240401213627513" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401213627513.png" style="max-width: 100%;"></a></p>
<h5>3.1.2.2 页面配置 xx.json</h5>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># 1 小程序页面配置文件，也称局部配置文件，用于配置当前页面的窗口样式、页面标题等</span>
<span class="pl-c"># 2 app.json 中的部分配置，也支持对单个页面进行配置，可以在页面对应的 xx.json 文件来对本页面的表现进行配置。</span>

<span class="pl-c"># 3 页面中配置项在当前页面会覆盖 app.json 中相同的配置项（样式相关的配置项属于 app.json 中的 window 属性，但这里不需要额外指定 window 字段），具体的取值和含义可参考全局配置文档中说明</span>


<span class="pl-c"># 4 参考文档：</span>
<span class="pl-s1">https</span>:<span class="pl-c1">//</span><span class="pl-s1">developers</span>.<span class="pl-s1">weixin</span>.<span class="pl-s1">qq</span>.<span class="pl-s1">com</span><span class="pl-c1">/</span><span class="pl-s1">miniprogram</span><span class="pl-c1">/</span><span class="pl-s1">dev</span><span class="pl-c1">/</span><span class="pl-s1">reference</span><span class="pl-c1">/</span><span class="pl-s1">configuration</span><span class="pl-c1">/</span><span class="pl-s1">page</span>.<span class="pl-s1">html</span>
    
<span class="pl-c"># 5 常用的</span>
<span class="pl-s1">navigationBarBackgroundColor</span>	<span class="pl-c"># 导航栏背景颜色，如 #000000	</span>
<span class="pl-s1">navigationBarTextStyle</span>	<span class="pl-c">#      导航栏标题、状态栏颜色，仅支持 black / white	</span>
<span class="pl-s1">navigationBarTitleText</span>	<span class="pl-c">#   导航栏标题文字内容</span></pre></div>
<h5>3.1.2.3  工程配置</h5>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c">#1  project.config.json      project.private.config.json	</span>
<span class="pl-c">#2  小程序项目的配置文件，用于保存项目的一些配置信息和开发者的个人设置</span>
<span class="pl-c">#3 project.private.config.json项目私有配置文件。此文件中的内容将覆盖 project.config.json 中的相同字段</span>

<span class="pl-c"># 4 参照文档</span>
<span class="pl-s1">https</span>:<span class="pl-c1">//</span><span class="pl-s1">developers</span>.<span class="pl-s1">weixin</span>.<span class="pl-s1">qq</span>.<span class="pl-s1">com</span><span class="pl-c1">/</span><span class="pl-s1">miniprogram</span><span class="pl-c1">/</span><span class="pl-s1">dev</span><span class="pl-c1">/</span><span class="pl-s1">devtools</span><span class="pl-c1">/</span><span class="pl-s1">projectconfig</span>.<span class="pl-s1">html</span></pre></div>
<h4>3.2 webview渲染</h4>
<h5>3.2.1 webview和skyline渲染模式</h5>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># webview：老一点，稳定，支持老版本和新版本</span>
<span class="pl-c"># skyline： 新一点，不太稳定，不支持老版本</span>

<span class="pl-c"># 调成webview模式，更稳定一些</span>

<span class="pl-c"># 项目配置---》app.json--&gt;删除3个配置</span>

<span class="pl-s">"renderer"</span>: <span class="pl-s">"skyline"</span>,
    <span class="pl-s">"rendererOptions"</span>: {
        <span class="pl-s">"skyline"</span>: {
            <span class="pl-s">"defaultDisplayBlock"</span>: <span class="pl-s1">true</span>,
            <span class="pl-s">"disableABTest"</span>: <span class="pl-s1">true</span>,
            <span class="pl-s">"sdkVersionBegin"</span>: <span class="pl-s">"3.0.0"</span>,
            <span class="pl-s">"sdkVersionEnd"</span>: <span class="pl-s">"15.255.255"</span>
        }
    },
        <span class="pl-s">"componentFramework"</span>: <span class="pl-s">"glass-easel"</span>,</pre></div>
<h4>3.3 新建页面</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># 1 app.json中只有一个页面--》小程序--》只有一个页面</span>
	<span class="pl-c1">-</span><span class="pl-s1">后期增加页面</span>
    
    
<span class="pl-c">####增加页面方式一#####</span>
	<span class="pl-c1">1</span> <span class="pl-s1">在pages上右键</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">新建文件夹</span>
    <span class="pl-c1">2</span> <span class="pl-s1">在新建的文件夹上</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">右键</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">新建Page</span>
    <span class="pl-c1">3</span> <span class="pl-s1">多出4个文件</span>
    	<span class="pl-s1">xx</span>.<span class="pl-s1">js</span>
        <span class="pl-s1">xx</span>.<span class="pl-s1">wxml</span>
        <span class="pl-s1">xx</span>.<span class="pl-s1">json</span>
        <span class="pl-s1">xx</span>.<span class="pl-s1">wxss</span>
    <span class="pl-c1">4</span> <span class="pl-s1">在app</span>.<span class="pl-s1">json中的page中多一行</span>
        <span class="pl-s">"pages"</span>: [
            <span class="pl-s">"pages/index/index"</span>,
            <span class="pl-s">"pages/login/login"</span>
          ]
<span class="pl-c">#### 增加页面方式二#### </span>
	<span class="pl-c1">1</span> <span class="pl-s1">在</span> <span class="pl-s1">app</span>.<span class="pl-s1">json中</span>，<span class="pl-s1">pages中</span>，<span class="pl-s1">新增一行</span>
    <span class="pl-c1">2</span> <span class="pl-s1">会自动创建文件夹和页面</span>
    	</pre></div>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/ddad44b1f0afcb9afddfe553db2b519ecf86c8a14873390642872423002dd72f/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313231353432363539342e706e67"><img src="https://camo.githubusercontent.com/ddad44b1f0afcb9afddfe553db2b519ecf86c8a14873390642872423002dd72f/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313231353432363539342e706e67" alt="image-20240401215426594" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401215426594.png" style="max-width: 100%;"></a></p>
<h4>3.4 启动页面调整</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c">## 1 修改小程序一启动，显示的页面</span>

<span class="pl-c">## 方式一：在app.json中的pages中修改顺序，第一个先显示</span>
  <span class="pl-s">"pages"</span>: [
    <span class="pl-s">"pages/index/index"</span>,
    <span class="pl-s">"pages/login/login"</span>,
    <span class="pl-s">"pages/register/register"</span>
  ],
        
<span class="pl-c">## 方式二：通过entryPagePath配置：entryPagePath：小程序默认启动首页	</span>
<span class="pl-s">"entryPagePath"</span>: <span class="pl-s">"pages/index/index"</span>,  <span class="pl-c"># 居多</span>
    
 
<span class="pl-c">###方式三：临时用--》写了个页面，临时看一下</span>
	<span class="pl-c1">-</span><span class="pl-s1">添加编译模式</span>
    </pre></div>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/d4d797638cdca27e874fe22dd9f8ad6471cbd0cba2bfacb3d635ea539d3454d4/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313232303232343134392e706e67"><img src="https://camo.githubusercontent.com/d4d797638cdca27e874fe22dd9f8ad6471cbd0cba2bfacb3d635ea539d3454d4/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303430313232303232343134392e706e67" alt="image-20240401220224149" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240401220224149.png" style="max-width: 100%;"></a></p>
<h4>3.5 纯净项目</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># 把项目不要的东西都删除--》只留核心--》开发</span>

<span class="pl-c"># # # # # app.json# # # # ## # # # #</span>
{
  <span class="pl-s">"pages"</span>: [  
    <span class="pl-s">"pages/index/index"</span>  <span class="pl-c"># 就一个页面</span>
    
  ],
  <span class="pl-s">"window"</span>: {
    <span class="pl-s">"navigationBarTitleText"</span>: <span class="pl-s">"功能演示"</span>,   <span class="pl-c"># 标题</span>
    <span class="pl-s">"navigationBarBackgroundColor"</span>: <span class="pl-s">"#0000FF"</span>, <span class="pl-c">#颜色</span>
    <span class="pl-s">"enablePullDownRefresh"</span>: <span class="pl-s1">false</span>,  <span class="pl-c"># 是否带下拉刷新</span>
    <span class="pl-s">"backgroundColor"</span>: <span class="pl-s">"#00FFFF"</span>,    <span class="pl-c"># 下拉刷新颜色</span>
    <span class="pl-s">"backgroundTextStyle"</span>: <span class="pl-s">"dark"</span>    <span class="pl-c"># light ，下拉刷新的点点什么颜色</span>
  },
  <span class="pl-s">"style"</span>: <span class="pl-s">"v2"</span>,
}

<span class="pl-c"># # # # #app.wxss  空的# # # # ## # # # #</span>

<span class="pl-c"># # # # #app.js# # # # ## # # # #</span>
<span class="pl-v">App</span>({})

<span class="pl-c"># # # # #pages/index# # # # ## # # # #</span>
    <span class="pl-s1">index</span>.<span class="pl-s1">js</span>
    	<span class="pl-v">Page</span>({})
    <span class="pl-s1">index</span>.<span class="pl-s1">json</span>
        {
          <span class="pl-s">"usingComponents"</span>: {

          },
          <span class="pl-s">"navigationBarTitleText"</span>: <span class="pl-s">"登录页面"</span>, 
          <span class="pl-s">"navigationBarBackgroundColor"</span>: <span class="pl-s">"#FFFF00"</span>,
          <span class="pl-s">"enablePullDownRefresh"</span>: <span class="pl-s1">true</span>,   
          <span class="pl-s">"backgroundTextStyle"</span>: <span class="pl-s">"light"</span> 
        }
    <span class="pl-s1">index</span>.<span class="pl-s1">wxml</span>
      <span class="pl-c1">&lt;</span><span class="pl-s1">view</span> <span class="pl-k">class</span><span class="pl-c1">=</span><span class="pl-s">"container"</span><span class="pl-c1">&gt;</span>
        <span class="pl-s1">彭于晏</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">呸呸呸</span>
      <span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
    <span class="pl-s1">index</span>.<span class="pl-s1">wxss</span>
    	<span class="pl-c1">-</span><span class="pl-s1">空的</span></pre></div>
<h3>4 快速上手</h3>
<h4>4.1 小程序常用组件</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c">#1 做过html</span>
	<span class="pl-s1">a标签</span>
    <span class="pl-s1">div标签</span>
    <span class="pl-s1">span标签</span>
    <span class="pl-s1">img标签</span>
    。。。
    
<span class="pl-c"># 2 小程序没有这些，自己封装的叫组件</span>
	<span class="pl-c1">-</span><span class="pl-s1">https</span>:<span class="pl-c1">//</span><span class="pl-s1">developers</span>.<span class="pl-s1">weixin</span>.<span class="pl-s1">qq</span>.<span class="pl-s1">com</span><span class="pl-c1">/</span><span class="pl-s1">miniprogram</span><span class="pl-c1">/</span><span class="pl-s1">dev</span><span class="pl-c1">/</span><span class="pl-s1">component</span><span class="pl-c1">/</span>
        
        
<span class="pl-c"># 3 text  ---》span 不换行，放文字</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">text</span><span class="pl-c1">&gt;</span><span class="pl-s1">我是首页</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">text</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">text</span><span class="pl-c1">&gt;</span><span class="pl-s1">我是首页333</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">text</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">text</span><span class="pl-c1">&gt;</span><span class="pl-s1">我是首页444</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">text</span><span class="pl-c1">&gt;</span>


<span class="pl-c"># 4 view--》div  换行</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-s1">我是view</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-s1">我是view222</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-c1">&lt;</span><span class="pl-s1">text</span><span class="pl-c1">&gt;</span><span class="pl-s1">撒东方闪电</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">text</span><span class="pl-c1">&gt;</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>

<span class="pl-c"># 5 image 标签---》img</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">image</span> <span class="pl-s1">src</span><span class="pl-c1">=</span><span class="pl-s">"/images/b.jpg"</span> <span class="pl-s1">style</span><span class="pl-c1">=</span><span class="pl-s">"width: 750rpx;height: 400rpx;"</span><span class="pl-c1">&gt;</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">image</span><span class="pl-c1">&gt;</span>


<span class="pl-c"># 6 icon</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">icon</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"success_no_circle"</span>  <span class="pl-s1">color</span><span class="pl-c1">=</span><span class="pl-s">"red"</span><span class="pl-c1">/</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">icon</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"cancel"</span> <span class="pl-s1">color</span><span class="pl-c1">=</span><span class="pl-s">"#ddd"</span><span class="pl-c1">/</span><span class="pl-c1">&gt;</span></pre></div>
<h4>4.2 tabbar配置</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># 在底部或在顶部的 tab页</span>
	<span class="pl-c1">-</span><span class="pl-s1">几乎所有小程序都会有这个</span>
    
    
<span class="pl-c"># 如何设置</span>
<span class="pl-c1">1</span> <span class="pl-s1">在app</span>.<span class="pl-s1">json</span> <span class="pl-s1">配置</span>
<span class="pl-s">"tabBar"</span>: {
    <span class="pl-s">"selectedColor"</span>: <span class="pl-s">"#b4282d"</span>,
    <span class="pl-s">"position"</span>: <span class="pl-s">"bottom"</span>,
    <span class="pl-s">"list"</span>: [
        {
            <span class="pl-s">"pagePath"</span>: <span class="pl-s">"pages/index/index"</span>,
            <span class="pl-s">"text"</span>: <span class="pl-s">"首页"</span>,
            <span class="pl-s">"iconPath"</span>: <span class="pl-s">"images/home.png"</span>,
            <span class="pl-s">"selectedIconPath"</span>: <span class="pl-s">"images/home_select.png"</span>
        },
        {
            <span class="pl-s">"pagePath"</span>: <span class="pl-s">"pages/my/my"</span>,
            <span class="pl-s">"text"</span>: <span class="pl-s">"我的"</span>,
            <span class="pl-s">"iconPath"</span>: <span class="pl-s">"images/my.png"</span>,
            <span class="pl-s">"selectedIconPath"</span>: <span class="pl-s">"images/my_select.png"</span>
        }
    ]
},
    
<span class="pl-c1">2</span> <span class="pl-s1">创建页面</span> <span class="pl-s1">my</span>

<span class="pl-c1">3</span> <span class="pl-s1">把图片复制到images目录下</span></pre></div>
<h3>5 wxml语法</h3>
<h4>5.1模版语法</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c">#  1 在页面 xx.js 的 Page() 方法的 data 对象中进行声明定义</span>
<span class="pl-c">#  2 在xx.wxml 中使用 {{}} 包裹，显示数据</span>
<span class="pl-c">#  3 可以显示如下，不能编写js语句或js方法</span>
	<span class="pl-c1">-</span><span class="pl-s1">变量</span>
	<span class="pl-c1">-</span><span class="pl-s1">算数运算</span>
	<span class="pl-c1">-</span><span class="pl-s1">三元运算</span>
	<span class="pl-c1">-</span><span class="pl-s1">逻辑判断</span>
    
    
<span class="pl-c"># 4 如果在js中，改了变量的值，想让页面也发生变化，需要使用this.setData({key:变化后的值})</span>
<span class="pl-c"># 5 修改数字案例</span>
<span class="pl-c">#######wxml#######</span>

<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-s1">姓名是</span>：{{<span class="pl-s1">name</span>}}<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-s1">年龄是</span>：{{<span class="pl-s1">age</span>}}<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">button</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"primary"</span> <span class="pl-s1">bindtap</span><span class="pl-c1">=</span><span class="pl-s">"handleAddAge"</span><span class="pl-c1">&gt;</span><span class="pl-s1">点我年龄</span><span class="pl-c1">+</span><span class="pl-c1">1</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">button</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c">########## js###########</span>
<span class="pl-v">Page</span>({
  <span class="pl-s1">data</span>:{
    <span class="pl-s1">name</span>:<span class="pl-s">'justin'</span>,
    <span class="pl-s1">age</span>:<span class="pl-c1">19</span>
  },
  <span class="pl-en">handleAddAge</span>(){
    <span class="pl-c1">//</span> <span class="pl-c1">1</span> <span class="pl-s1">如何取到data中的age</span>
    <span class="pl-c1">//</span> <span class="pl-s1">console</span>.<span class="pl-en">log</span>(<span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">age</span>)


    <span class="pl-c1">//</span> <span class="pl-c1">2</span> <span class="pl-s1">让年龄</span><span class="pl-c1">+</span><span class="pl-c1">1</span>
    <span class="pl-c1">//</span> <span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">age</span><span class="pl-c1">+=</span><span class="pl-c1">1</span>
    <span class="pl-c1">//</span> <span class="pl-s1">console</span>.<span class="pl-en">log</span>(<span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">age</span>)



    <span class="pl-c1">//</span> <span class="pl-c1">3</span> <span class="pl-s1">默认数据</span>，<span class="pl-s1">不是响应式</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">js</span> <span class="pl-s1">变量变化了</span>，<span class="pl-s1">页面没有变化</span>


    <span class="pl-c1">//</span> <span class="pl-c1">4</span> <span class="pl-s1">要让页面也变</span>，<span class="pl-s1">借助于微信提供的</span> <span class="pl-s1">setData方法</span>
    <span class="pl-s1">let</span> <span class="pl-s1">a</span><span class="pl-c1">=</span><span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">age</span><span class="pl-c1">+</span><span class="pl-c1">1</span>
    <span class="pl-s1">this</span>.<span class="pl-en">setData</span>({
      <span class="pl-s1">age</span>:<span class="pl-s1">a</span>
    })

  }
})
<span class="pl-c"># 6 修改对象案例，修改单个，修改多个</span>
<span class="pl-c">####js######</span>
<span class="pl-s1">data</span>:{
    <span class="pl-s1">userinfo</span>:{<span class="pl-s1">name</span>:<span class="pl-s">'lqz'</span>,<span class="pl-s1">hobby</span>:<span class="pl-s">'烫头'</span>}
},
<span class="pl-en">handleChangeHobby</span>(){
    <span class="pl-s1">this</span>.<span class="pl-en">setData</span>({
        <span class="pl-s">'userinfo.hobby'</span>:<span class="pl-s">'篮球'</span>
    })
}
<span class="pl-c"># 另一种方式</span>
<span class="pl-en">handleChangeHobby</span>(){

    <span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">userinfo</span>.<span class="pl-s1">hobby</span><span class="pl-c1">=</span><span class="pl-s">'足球'</span>
    <span class="pl-s1">this</span>.<span class="pl-en">setData</span>({
        <span class="pl-s">'userinfo.hobby'</span>:<span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">userinfo</span>.<span class="pl-s1">hobby</span>
    })
}
<span class="pl-c">### 修改或添加元素</span>
  <span class="pl-en">handleChangeHobby</span>(){
    <span class="pl-c1">//</span> <span class="pl-s1">解压赋值</span>
    <span class="pl-c1">//</span> <span class="pl-s1">const</span> <span class="pl-s1">user</span><span class="pl-c1">=</span>{...<span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">userinfo</span>,<span class="pl-s1">age</span>:<span class="pl-c1">19</span>}

    <span class="pl-c1">//</span> <span class="pl-s1">简写</span>
    <span class="pl-s1">const</span> <span class="pl-s1">userinfo</span><span class="pl-c1">=</span>{...<span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">userinfo</span>,<span class="pl-s1">age</span>:<span class="pl-c1">19</span>,<span class="pl-s1">hobby</span>:<span class="pl-s">'乒乓球'</span>}
    <span class="pl-s1">this</span>.<span class="pl-en">setData</span>({
      <span class="pl-c1">//</span> <span class="pl-s1">userinfo</span>:<span class="pl-s1">userinfo</span>
      <span class="pl-s1">userinfo</span>
    })
    <span class="pl-c1">//</span> <span class="pl-s1">保证写出项目来</span>，<span class="pl-s1">js特殊语法</span>，<span class="pl-s1">如果不会</span>，<span class="pl-s1">就不要用</span>，<span class="pl-s1">就用最原始的即可</span>

  }

<span class="pl-c">#### wxml####</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">显示对象</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>{{<span class="pl-s1">userinfo</span>.<span class="pl-s1">name</span>}}<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>{{<span class="pl-s1">userinfo</span>.<span class="pl-s1">hobby</span>}}<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">button</span> <span class="pl-s1">type</span><span class="pl-c1">=</span>"<span class="pl-s1">primary</span>" <span class="pl-s1">bindtap</span><span class="pl-c1">=</span>"<span class="pl-s1">handleChangeHobby</span>"<span class="pl-c1">&gt;</span><span class="pl-s1">变化爱好</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">button</span><span class="pl-c1">&gt;</span>



<span class="pl-c">## 7 修改数组案例</span>
<span class="pl-c">###js####</span>
 <span class="pl-s1">handleAddName</span>(){

      <span class="pl-c1">//</span><span class="pl-c1">1</span> <span class="pl-s1">先追加</span>，<span class="pl-s1">在setData</span><span class="pl-s1"></span>
      <span class="pl-c1">//</span> <span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">names</span>.<span class="pl-en">push</span>(<span class="pl-s">'亚瑟王'</span>)
      <span class="pl-c1">//</span> <span class="pl-s1">this</span>.<span class="pl-en">setData</span>({
      <span class="pl-c1">//</span>   <span class="pl-s1">names</span>:<span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">names</span>
      <span class="pl-c1">//</span><span class="pl-s1"></span> })

      <span class="pl-c1">//</span><span class="pl-c1">2</span> <span class="pl-s1">通过数组的拼接</span>
      <span class="pl-c1">//</span> <span class="pl-s1">const</span> <span class="pl-s1">newName</span><span class="pl-c1">=</span><span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">names</span>.<span class="pl-en">concat</span>(<span class="pl-s">'甄姬'</span>) <span class="pl-c1">//</span> <span class="pl-s1">concat</span> <span class="pl-s1">不会在原数组增加</span>
      <span class="pl-c1">//</span> <span class="pl-s1">this</span>.<span class="pl-en">setData</span>({
      <span class="pl-c1">//</span>   <span class="pl-s1">names</span>:<span class="pl-s1">newName</span>
      <span class="pl-c1">//</span><span class="pl-s1"></span> })

      <span class="pl-c1">//</span> <span class="pl-c1">3</span> <span class="pl-s1">结构赋值</span>
      <span class="pl-c1">//</span> <span class="pl-s1">const</span> <span class="pl-s1">newName</span><span class="pl-c1">=</span>[...<span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">names</span>,<span class="pl-s">'李白'</span>]
      <span class="pl-c1">//</span> <span class="pl-s1">this</span>.<span class="pl-en">setData</span>({
      <span class="pl-c1">//</span>   <span class="pl-s1">names</span>:<span class="pl-s1">newName</span>
      <span class="pl-c1">//</span><span class="pl-s1"></span> })

      <span class="pl-c1">//</span> <span class="pl-c1">4</span> <span class="pl-s1">改值</span>，<span class="pl-s1">把刘亦菲改成</span> <span class="pl-s1">爱刘亦菲</span>
      <span class="pl-c1">//</span> <span class="pl-s1">this</span>.<span class="pl-en">setData</span>({
      <span class="pl-c1">//</span>   <span class="pl-s">'names[0]'</span>:<span class="pl-s">'爱刘亦菲'</span>
      <span class="pl-c1">//</span><span class="pl-s1"></span> })

      <span class="pl-c1">//</span> <span class="pl-c1">5</span> <span class="pl-s1">删除值</span>
      <span class="pl-c1">//</span> <span class="pl-s1">可以先把数组修改完</span>，<span class="pl-s1">再用setData赋值</span>
      <span class="pl-s1">this</span>.<span class="pl-en">setData</span>({
        <span class="pl-s1">names</span>:<span class="pl-s1">this</span>.<span class="pl-s1">data</span>.<span class="pl-s1">names</span>.<span class="pl-en">slice</span>(<span class="pl-c1">1</span>)
      })
  }

<span class="pl-c">####wxml####</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">循环数组打印名字</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>

<span class="pl-c1">&lt;</span><span class="pl-s1">view</span> <span class="pl-s1">wx</span>:<span class="pl-s1">for</span><span class="pl-c1">=</span><span class="pl-s">"{{names}}"</span> <span class="pl-s1">wx</span>:<span class="pl-s1">key</span><span class="pl-c1">=</span><span class="pl-s">"index"</span><span class="pl-c1">&gt;</span>{{<span class="pl-s1">item</span>}}<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">button</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"primary"</span> <span class="pl-s1">bindtap</span><span class="pl-c1">=</span><span class="pl-s">"handleAddName"</span><span class="pl-c1">&gt;</span><span class="pl-s1">增加人名</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">button</span><span class="pl-c1">&gt;</span>



<span class="pl-c">### js const和let 和var区别</span>
	<span class="pl-c1">-</span><span class="pl-s1">老版本js</span>：<span class="pl-s1">定义变量用var</span>，<span class="pl-s1">会有坑</span>
    <span class="pl-c1">-</span><span class="pl-s1">新版本</span>：<span class="pl-s1">定义变量用</span> <span class="pl-s1">let</span>，<span class="pl-s1">定义常量用const</span></pre></div>
<h4>5.2 列表渲染</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># for 循环--》循环人名显示</span>

<span class="pl-c">###使用</span>
<span class="pl-c">###wxml##</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">循环数组打印名字</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>

<span class="pl-c1">&lt;</span><span class="pl-s1">view</span> <span class="pl-s1">wx</span>:<span class="pl-s1">for</span><span class="pl-c1">=</span><span class="pl-s">"{{names}}"</span> <span class="pl-s1">wx</span>:<span class="pl-s1">key</span><span class="pl-c1">=</span><span class="pl-s">"index"</span><span class="pl-c1">&gt;</span>{{<span class="pl-s1">item</span>}}<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">button</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"primary"</span> <span class="pl-s1">bindtap</span><span class="pl-c1">=</span><span class="pl-s">"handleAddName"</span><span class="pl-c1">&gt;</span><span class="pl-s1">增加人名</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">button</span><span class="pl-c1">&gt;</span>

<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">列表渲染显示商品信息</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>

<span class="pl-c1">&lt;</span><span class="pl-s1">view</span> <span class="pl-s1">wx</span>:<span class="pl-k">for</span><span class="pl-c1">=</span><span class="pl-s">"{{goodsList}}"</span> <span class="pl-s1">wx</span>:<span class="pl-s1">key</span><span class="pl-c1">=</span><span class="pl-s">"index"</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span>!<span class="pl-c1">-</span><span class="pl-c1">-</span> <span class="pl-s1">如果不加</span> <span class="pl-s1">wx</span>:<span class="pl-s1">key</span> <span class="pl-s1">会报警告</span>  <span class="pl-s1">wx</span>:<span class="pl-s1">key</span> <span class="pl-s1">必须唯一</span> <span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span>!<span class="pl-c1">-</span><span class="pl-c1">-</span> <span class="pl-s1">item</span> <span class="pl-s1">只要循环数据</span>，<span class="pl-s1">在循环里面</span>，<span class="pl-s1">就会有两个值</span>：<span class="pl-s1">一个是index</span>，<span class="pl-s1">索引值</span>，<span class="pl-s1">另一个是</span> <span class="pl-s1">item</span>，<span class="pl-s1">数组循环的值</span> <span class="pl-s1">能改</span>，<span class="pl-s1">但是一般不改</span> <span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">&gt;</span>
  <span class="pl-c1">&lt;</span><span class="pl-s1">text</span><span class="pl-c1">&gt;</span>{{<span class="pl-s1">index</span>}}<span class="pl-c1">-</span><span class="pl-s1">商品id</span>:{{<span class="pl-s1">item</span>.<span class="pl-s1">id</span>}}<span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">商品名字</span>:{{<span class="pl-s1">item</span>.<span class="pl-s1">name</span>}}<span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">商品价格</span>:{{<span class="pl-s1">item</span>.<span class="pl-s1">price</span>}}<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">text</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>

<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">列表渲染显示商品信息</span><span class="pl-c1">-</span><span class="pl-s1">修改item和index</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span> <span class="pl-s1">wx</span>:<span class="pl-s1">for</span><span class="pl-c1">=</span><span class="pl-s">"{{goodsList}}"</span> <span class="pl-s1">wx</span>:<span class="pl-s1">key</span><span class="pl-c1">=</span><span class="pl-s">"index"</span> <span class="pl-s1">wx</span>:<span class="pl-s1">for</span><span class="pl-c1">-</span><span class="pl-s1">item</span><span class="pl-c1">=</span><span class="pl-s">'info'</span> <span class="pl-s1">wx</span>:<span class="pl-s1">for</span><span class="pl-c1">-</span><span class="pl-s1">index</span><span class="pl-c1">=</span><span class="pl-s">'i'</span><span class="pl-c1">&gt;</span>
  <span class="pl-c1">&lt;</span><span class="pl-s1">text</span><span class="pl-c1">&gt;</span>{{<span class="pl-s1">i</span>}}<span class="pl-c1">-</span><span class="pl-s1">商品id</span>:{{<span class="pl-s1">info</span>.<span class="pl-s1">id</span>}}<span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">商品名字</span>:{{<span class="pl-s1">info</span>.<span class="pl-s1">name</span>}}<span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">商品价格</span>:{{<span class="pl-s1">info</span>.<span class="pl-s1">price</span>}}<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">text</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>

<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">列表渲染显示商品信息</span><span class="pl-c1">-</span><span class="pl-s1">block</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span> <span class="pl-s1">wx</span>:<span class="pl-s1">for</span><span class="pl-c1">=</span><span class="pl-s">"{{goodsList}}"</span> <span class="pl-s1">wx</span>:<span class="pl-s1">key</span><span class="pl-c1">=</span><span class="pl-s">"index"</span> <span class="pl-s1">wx</span>:<span class="pl-s1">for</span><span class="pl-c1">-</span><span class="pl-s1">item</span><span class="pl-c1">=</span><span class="pl-s">'info'</span> <span class="pl-s1">wx</span>:<span class="pl-s1">for</span><span class="pl-c1">-</span><span class="pl-s1">index</span><span class="pl-c1">=</span><span class="pl-s">'i'</span><span class="pl-c1">&gt;</span>
  <span class="pl-c1">&lt;</span><span class="pl-s1">block</span><span class="pl-c1">&gt;</span>{{<span class="pl-s1">i</span>}}<span class="pl-c1">-</span><span class="pl-s1">商品id</span>:{{<span class="pl-s1">info</span>.<span class="pl-s1">id</span>}}<span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">商品名字</span>:{{<span class="pl-s1">info</span>.<span class="pl-s1">name</span>}}<span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">商品价格</span>:{{<span class="pl-s1">info</span>.<span class="pl-s1">price</span>}}<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">block</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>

<span class="pl-c">###js###</span>
<span class="pl-s1">goodsList</span>:[{<span class="pl-s1">id</span>:<span class="pl-c1">1001</span>,<span class="pl-s1">name</span>:<span class="pl-s">'钢笔'</span>,<span class="pl-s1">price</span>:<span class="pl-c1">9</span>},{<span class="pl-s1">id</span>:<span class="pl-c1">1002</span>,<span class="pl-s1">name</span>:<span class="pl-s">'铅笔'</span>,<span class="pl-s1">price</span>:<span class="pl-c1">6</span>},{<span class="pl-s1">id</span>:<span class="pl-c1">1003</span>,<span class="pl-s1">name</span>:<span class="pl-s">'脸盆'</span>,<span class="pl-s1">price</span>:<span class="pl-c1">99</span>}]</pre></div>
<h4>5.3 条件渲染</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># 1 wx:if   wx:elif   wx:else </span>

<span class="pl-c"># 2 案例：输入框，输入分数，显示成绩等级</span>
<span class="pl-c">###js##</span>
<span class="pl-s1">score</span>:<span class="pl-c1">70</span>,
<span class="pl-c">### wxml##</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">条件渲染</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">input</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"text"</span> <span class="pl-s1">model</span>:<span class="pl-s1">value</span><span class="pl-c1">=</span><span class="pl-s">"{{score}}"</span> <span class="pl-s1">style</span><span class="pl-c1">=</span><span class="pl-s">"border:1rpx solid red;"</span><span class="pl-c1">/</span><span class="pl-c1">&gt;</span>

<span class="pl-c1">&lt;</span><span class="pl-s1">view</span> <span class="pl-s1">wx</span>:<span class="pl-s1">if</span><span class="pl-c1">=</span><span class="pl-s">"{{score&gt;=90&amp;&amp;score&lt;=100}}"</span><span class="pl-c1">&gt;</span><span class="pl-s1">优秀</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span> <span class="pl-s1">wx</span>:<span class="pl-s1">elif</span><span class="pl-c1">=</span><span class="pl-s">"{{score&gt;=80&amp;&amp;score&lt;90}}"</span><span class="pl-c1">&gt;</span><span class="pl-s1">良好</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span> <span class="pl-s1">wx</span>:<span class="pl-s1">elif</span><span class="pl-c1">=</span><span class="pl-s">"{{score&gt;=60&amp;&amp;score&lt;80}}"</span><span class="pl-c1">&gt;</span><span class="pl-s1">及格</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span> <span class="pl-s1">wx</span>:<span class="pl-s1">else</span><span class="pl-c1">&gt;</span><span class="pl-s1">不及格</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c"># 3 wx:if 和 hidden的区别</span>
	<span class="pl-s1">hidden不删除元素</span>
    <span class="pl-s1">wx</span>:<span class="pl-s1">if</span> <span class="pl-s1">删除元素</span>
        
        
<span class="pl-c">### wxml###</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">wx</span>:<span class="pl-k">if</span> <span class="pl-s1">和</span> <span class="pl-s1">hidden</span> <span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">image</span> <span class="pl-s1">src</span><span class="pl-c1">=</span><span class="pl-s">"/images/b.jpg"</span> <span class="pl-s1">mode</span><span class="pl-c1">=</span><span class="pl-s">"aspectFill"</span> <span class="pl-s1">hidden</span><span class="pl-c1">=</span><span class="pl-s">"{{showPhoto}}"</span><span class="pl-c1">/</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">button</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"primary"</span> <span class="pl-s1">bindtap</span><span class="pl-c1">=</span><span class="pl-s">"handleShowPhoto"</span><span class="pl-c1">&gt;</span><span class="pl-s1">显示隐藏图片</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">button</span><span class="pl-c1">&gt;</span>

<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c">### js###</span>
<span class="pl-s1">showPhoto</span>:<span class="pl-s1">true</span>
  <span class="pl-en">handleShowPhoto</span>(){
    <span class="pl-s1">this</span>.<span class="pl-en">setData</span>({
      <span class="pl-s1">showPhoto</span>:!t<span class="pl-s1">his</span>.<span class="pl-s1">data</span>.<span class="pl-s1">showPhoto</span>
    })
  },</pre></div>
<h3>6 发送网络请求</h3>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># 之前学的，全是在微信小程序端操作，没有加入后端</span>

<span class="pl-c"># 需要在微信小程序端，发送网络请求，获取数据，显示在小程序上</span></pre></div>
<h4>6.1 微信发送网络请求</h4>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c"># 1 注意：发送网络请求的域名，必须在微信公众平台配置</span>
	<span class="pl-c1">-</span><span class="pl-s1">本地环境去除</span>，<span class="pl-s1">只适用于开发版和体验版</span>
    
<span class="pl-c"># 2  发送请求</span>
	<span class="pl-c1">-</span><span class="pl-s1">django后端</span>：<span class="pl-s1">写个接口</span>，<span class="pl-s1">返回用户信息</span>
    <span class="pl-c1">-</span><span class="pl-s1">微信小程序端</span>：<span class="pl-s1">发送请求</span>，<span class="pl-s1">获取数据</span>，<span class="pl-s1">显示在微信小程序端</span>
    
<span class="pl-c"># 3 发送请求</span>
<span class="pl-c">###js###</span>
  <span class="pl-s1">user</span>:{}
  <span class="pl-en">handleLoadUser</span>(){
    <span class="pl-c1">//</span> <span class="pl-s1">发送请求之前</span> <span class="pl-s1">loading效果</span>
    <span class="pl-s1">wx</span>.<span class="pl-en">showLoading</span>({
      <span class="pl-s1">title</span>: <span class="pl-s">'加载中~~'</span>,
      <span class="pl-s1">mask</span>:<span class="pl-s1">true</span>  <span class="pl-c1">//</span> <span class="pl-s1">显示透明蒙层</span>，<span class="pl-s1">设置后</span>，<span class="pl-s1">框后的按钮都不能点击了</span>
    })
    <span class="pl-s1">wx</span>.<span class="pl-en">request</span>({
      <span class="pl-s1">url</span>: <span class="pl-s">'http://127.0.0.1:8000/index/'</span>,
      <span class="pl-s1">method</span>:<span class="pl-s">'GET'</span>,
      <span class="pl-s1">data</span>:{},
      <span class="pl-s1">header</span>:{},
      <span class="pl-s1">success</span>:(<span class="pl-s1">res</span>)<span class="pl-c1">=</span><span class="pl-c1">&gt;</span>{
          <span class="pl-c1">//</span><span class="pl-s1">请求成功</span>
          <span class="pl-s1">console</span>.<span class="pl-en">log</span>(<span class="pl-s1">res</span>.<span class="pl-s1">data</span>)
          <span class="pl-s1">this</span>.<span class="pl-en">setData</span>({
            <span class="pl-s1">user</span>:<span class="pl-s1">res</span>.<span class="pl-s1">data</span>
          })
      },
      <span class="pl-en">fail</span>:(<span class="pl-s1">error</span>)<span class="pl-c1">=</span><span class="pl-c1">&gt;</span>{
        <span class="pl-s1">console</span>.<span class="pl-en">log</span>(<span class="pl-s1">error</span>)
      },
      <span class="pl-en">complete</span>:(<span class="pl-s1">res</span>)<span class="pl-c1">=</span><span class="pl-c1">&gt;</span>{
        <span class="pl-c1">//</span> <span class="pl-s1">关闭加载</span>
        <span class="pl-s1">wx</span>.<span class="pl-en">hideLoading</span>()
      }

    })

  },
<span class="pl-c">##wxml###</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">发送网络请求</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-s1">用户名</span>：{{<span class="pl-s1">user</span>.<span class="pl-s1">name</span>}}<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-s1">爱好</span>：{{<span class="pl-s1">user</span>.<span class="pl-s1">hobby</span>}}<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span><span class="pl-s1">年龄</span>：{{<span class="pl-s1">user</span>.<span class="pl-s1">age</span>}}<span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">view</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">button</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"primary"</span> <span class="pl-s1">bindtap</span><span class="pl-c1">=</span><span class="pl-s">"handleLoadUser"</span><span class="pl-c1">&gt;</span><span class="pl-s1">加载用户信息</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">button</span><span class="pl-c1">&gt;</span>


<span class="pl-c">## 4 loading提示框</span>
<span class="pl-c"># 显示</span>
 <span class="pl-s1">wx</span>.<span class="pl-en">showLoading</span>({
      <span class="pl-s1">title</span>: <span class="pl-s">'加载中，稍后'</span>,
      <span class="pl-s1">mask</span>:<span class="pl-s1">true</span>  <span class="pl-c1">//</span> <span class="pl-s1">显示透明蒙层</span>
    })
    
    
<span class="pl-c">#关闭--必须手动关闭</span>
 <span class="pl-s1">wx</span>.<span class="pl-en">hideLoading</span>()</pre></div>
<h3>7 消息对话框</h3>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c">###js###</span>
<span class="pl-en">handleShowTost</span>(){
    <span class="pl-s1">wx</span>.<span class="pl-en">showToast</span>({
        <span class="pl-s1">title</span>: <span class="pl-s">'恭喜您，秒杀成功~~'</span>,
        <span class="pl-s1">icon</span>:<span class="pl-s">'none'</span>,
        <span class="pl-s1">duration</span>:<span class="pl-c1">2000</span>
    })
}、

<span class="pl-c">### wxml###</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">button</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"warn"</span> <span class="pl-s1">plain</span> <span class="pl-s1">bind</span>:<span class="pl-s1">tap</span><span class="pl-c1">=</span><span class="pl-s">"handleShowTost"</span><span class="pl-c1">&gt;</span><span class="pl-s1">点我弹出消息框</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">button</span><span class="pl-c1">&gt;</span></pre></div>
<h3>8 存储</h3>
<div class="highlight highlight-source-python"><pre class="notranslate"><span class="pl-c">#### wxml####</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">button</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"default"</span> <span class="pl-s1">plain</span> <span class="pl-s1">bind</span>:<span class="pl-s1">tap</span><span class="pl-c1">=</span><span class="pl-s">"handleSave"</span><span class="pl-c1">&gt;</span><span class="pl-s1">存储数据</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">button</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">button</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"primary"</span> <span class="pl-s1">plain</span> <span class="pl-s1">bind</span>:<span class="pl-s1">tap</span><span class="pl-c1">=</span><span class="pl-s">"handleGet"</span><span class="pl-c1">&gt;</span><span class="pl-s1">获取数据</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">button</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">button</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"default"</span> <span class="pl-s1">plain</span> <span class="pl-s1">bind</span>:<span class="pl-s1">tap</span><span class="pl-c1">=</span><span class="pl-s">"handleDelete"</span><span class="pl-c1">&gt;</span><span class="pl-s1">删除数据</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">button</span><span class="pl-c1">&gt;</span>
<span class="pl-c1">&lt;</span><span class="pl-s1">button</span> <span class="pl-s1">type</span><span class="pl-c1">=</span><span class="pl-s">"primary"</span> <span class="pl-s1">plain</span> <span class="pl-s1">bind</span>:<span class="pl-s1">tap</span><span class="pl-c1">=</span><span class="pl-s">"handleClear"</span><span class="pl-c1">&gt;</span><span class="pl-s1">清空数据</span><span class="pl-c1">&lt;</span><span class="pl-c1">/</span><span class="pl-s1">button</span><span class="pl-c1">&gt;</span>

<span class="pl-c">###js###</span>
<span class="pl-c">###########同步###########</span>
<span class="pl-c1">//</span> <span class="pl-s1">后期可以使用同步或异步</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">感官身上差不多</span>，<span class="pl-s1">但是写法不一样</span>
<span class="pl-c1">//</span> <span class="pl-s1">同步保存</span>
<span class="pl-en">handleSave</span>() {
    <span class="pl-s1">wx</span>.<span class="pl-en">setStorageSync</span>(<span class="pl-s">'name'</span>, <span class="pl-s">'justin'</span>)
    <span class="pl-s1">wx</span>.<span class="pl-en">setStorageSync</span>(<span class="pl-s">'age'</span>, <span class="pl-c1">19</span>)
    <span class="pl-c1">//</span> <span class="pl-s1">微信小程序</span>，<span class="pl-s1">直接存对象即可</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">最终它被转成json格式字符串存到</span> <span class="pl-s1">本地存储中</span>
    <span class="pl-s1">wx</span>.<span class="pl-en">setStorageSync</span>(<span class="pl-s">'wife'</span>, {<span class="pl-s1">name</span>:<span class="pl-s">'刘亦菲'</span>,<span class="pl-s1">age</span>:<span class="pl-s">'37'</span>,<span class="pl-s1">hobby</span>:<span class="pl-s">'高尔夫'</span>})
},
<span class="pl-en">handleGet</span>() {
    <span class="pl-s1">const</span> <span class="pl-s1">name</span><span class="pl-c1">=</span><span class="pl-s1">wx</span>.<span class="pl-en">getStorageSync</span>(<span class="pl-s">"name"</span>)
    <span class="pl-s1">const</span> <span class="pl-s1">age</span><span class="pl-c1">=</span><span class="pl-s1">wx</span>.<span class="pl-en">getStorageSync</span>(<span class="pl-s">"age"</span>)
    <span class="pl-s1">const</span> <span class="pl-s1">wife</span><span class="pl-c1">=</span><span class="pl-s1">wx</span>.<span class="pl-en">getStorageSync</span>(<span class="pl-s">"wife"</span>)
    <span class="pl-s1">console</span>.<span class="pl-en">log</span>(<span class="pl-s1">name</span>)
    <span class="pl-s1">console</span>.<span class="pl-en">log</span>(<span class="pl-s1">age</span>)
    <span class="pl-s1">console</span>.<span class="pl-en">log</span>(<span class="pl-s1">wife</span>)

},
<span class="pl-en">handleDelete</span>() {
    <span class="pl-c1">//</span> <span class="pl-s1">清除微信缓存</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">删除小程序</span><span class="pl-c1">-</span><span class="pl-c1">-</span><span class="pl-s1">用代码</span>
    <span class="pl-s1">wx</span>.<span class="pl-en">removeStorageSync</span>(<span class="pl-s">'wife'</span>)
},
<span class="pl-en">handleClear</span>() {
    <span class="pl-s1">wx</span>.<span class="pl-en">clearStorageSync</span>()
}
<span class="pl-c">#######异步###########</span>
<span class="pl-c1">//</span> <span class="pl-s1">异步保存</span>
<span class="pl-en">handleSave</span>() {
    <span class="pl-c1">//</span> <span class="pl-s1">如果不需要获取返回值</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">可以直接写</span>
    <span class="pl-s1">wx</span>.<span class="pl-en">setStorage</span>({
        <span class="pl-s1">key</span>:<span class="pl-s">'name'</span>,
        <span class="pl-s1">data</span>:<span class="pl-s">'lqz'</span>
    })
    <span class="pl-s1">wx</span>.<span class="pl-en">setStorage</span>({
        <span class="pl-s1">key</span>:<span class="pl-s">'boyfriend'</span>,
        <span class="pl-s1">data</span>:{<span class="pl-s1">name</span>:<span class="pl-s">'彭于晏'</span>,<span class="pl-s1">age</span>:<span class="pl-c1">67</span>}
    })

},

<span class="pl-c1">//</span> <span class="pl-s1">异步获取</span><span class="pl-c1">-</span><span class="pl-c1">-</span>》<span class="pl-s1">函数定义成</span> <span class="pl-s1">async</span>  <span class="pl-s1">内部获取的时候</span>，<span class="pl-s1">前面写</span> <span class="pl-s1">await</span>
<span class="pl-en">async</span> <span class="pl-s1">handleGet</span>() {
    <span class="pl-s1">const</span> <span class="pl-s1">boyfriend</span><span class="pl-c1">=</span><span class="pl-k">await</span> <span class="pl-s1">wx</span>.<span class="pl-en">getStorage</span>({<span class="pl-s1">key</span>:<span class="pl-s">'boyfriend'</span>})
    <span class="pl-s1">console</span>.<span class="pl-en">log</span>(<span class="pl-s1">boyfriend</span>.<span class="pl-s1">data</span>)
},
<span class="pl-en">handleDelete</span>() {
    <span class="pl-s1">wx</span>.<span class="pl-en">removeStorage</span>({
        <span class="pl-s1">key</span>:<span class="pl-s">'name'</span>
    })
},
<span class="pl-en">handleClear</span>() {
    <span class="pl-s1">wx</span>.<span class="pl-en">clearStorage</span>()
}</pre></div>
<h2>MQTT接入小程序</h2>
<p><a href="https://www.emqx.com/zh/blog/mqtt-js-tutorial" rel="nofollow">MQTT.js 入门教程 | EMQ (emqx.com)</a></p>
<p><a href="https://esp-document.icce.top/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/7%E3%80%81MQTT%E4%B8%8B%E8%BD%BD%E5%BC%95%E5%85%A5%E5%92%8C%E9%85%8D%E7%BD%AE%E8%BF%9E%E6%8E%A5.html" rel="nofollow">MQTT 下载引入和配置连接 | ESP32全栈应用开发文档 (icce.top)</a></p>
<p><a href="https://www.emqx.com/zh/blog/the-easiest-guide-to-getting-started-with-mqtt" rel="nofollow">MQTT 协议入门：基础知识和快速教程 | EMQ (emqx.com)</a></p>
<h3>1 MQTT.js库下载</h3>
<p><a href="https://esp-document.icce.top/js/mqtt.min.js" rel="nofollow">点击下载 mqtt.min.js</a></p>
<h3>2 导入和使用</h3>
<p>将下载到本地的 mqtt.min.js 拷贝到项目的 utils 目录下，如下图所示</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/2735debcb81a69c58691f2d2294d62208cb3d440885b6a7ac5a3d673142ab10f/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303531353039333335383439302e706e67"><img src="https://camo.githubusercontent.com/2735debcb81a69c58691f2d2294d62208cb3d440885b6a7ac5a3d673142ab10f/68747470733a2f2f696d6774726f6167652d313331373136323131312e636f732e61702d6e616e6a696e672e6d7971636c6f75642e636f6d2f696d672f696d6167652d32303234303531353039333335383439302e706e67" alt="image-20240515093358490" data-canonical-src="https://imgtroage-1317162111.cos.ap-nanjing.myqcloud.com/img/image-20240515093358490.png" style="max-width: 100%;"></a></p>
<div class="highlight highlight-source-js"><pre class="notranslate"><span class="pl-k">import</span> <span class="pl-s1">mqtt</span> <span class="pl-k">from</span> <span class="pl-s">"../../utils/mqtt.min.js"</span>
<span class="pl-k">let</span> <span class="pl-s1">client</span> <span class="pl-c1">=</span> <span class="pl-c1">null</span><span class="pl-kos">;</span> <span class="pl-c">// mqtt连接</span></pre></div>
<h3>3 创建MQTT连接</h3>
<div class="highlight highlight-source-js"><pre class="notranslate"><span class="pl-en">connectMqtt</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos"></span> <span class="pl-kos">{</span>
  <span class="pl-k">let</span> <span class="pl-s1">that</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">;</span>
  <span class="pl-k">const</span> <span class="pl-s1">options</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">connectTimeout</span>: <span class="pl-c1">4000</span><span class="pl-kos">,</span>
    <span class="pl-c1">address</span>: <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">data</span><span class="pl-kos">.</span><span class="pl-c1">address</span><span class="pl-kos">,</span> <span class="pl-c">// 输入的连接地址</span>
    <span class="pl-c1">port</span>: <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">data</span><span class="pl-kos">.</span><span class="pl-c1">port</span><span class="pl-kos">,</span> <span class="pl-c">// 输入的端口号</span>
    <span class="pl-c1">username</span>: <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">data</span><span class="pl-kos">.</span><span class="pl-c1">username</span><span class="pl-kos">,</span> <span class="pl-c">// 输入的用户名</span>
    <span class="pl-c1">password</span>: <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">data</span><span class="pl-kos">.</span><span class="pl-c1">password</span><span class="pl-kos">,</span> <span class="pl-c">// 输入的密码</span>
  <span class="pl-kos">}</span><span class="pl-kos">;</span>

  <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"address是："</span><span class="pl-kos">,</span> <span class="pl-s1">options</span><span class="pl-kos">.</span><span class="pl-c1">address</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-s1">client</span> <span class="pl-c1">=</span> <span class="pl-s1">mqtt</span><span class="pl-kos">.</span><span class="pl-en">connect</span><span class="pl-kos">(</span><span class="pl-s">"wxs://"</span> <span class="pl-c1">+</span> <span class="pl-s1">options</span><span class="pl-kos">.</span><span class="pl-c1">address</span> <span class="pl-c1">+</span> <span class="pl-s">"/mqtt"</span><span class="pl-kos">,</span> <span class="pl-s1">options</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// 连接方法</span>
  <span class="pl-s1">client</span><span class="pl-kos">.</span><span class="pl-en">on</span><span class="pl-kos">(</span><span class="pl-s">"connect"</span><span class="pl-kos">,</span> <span class="pl-s1">error</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"连接成功"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-c">// 可以在这里写一些连接成功的逻辑</span>
  <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

  <span class="pl-s1">client</span><span class="pl-kos">.</span><span class="pl-en">on</span><span class="pl-kos">(</span><span class="pl-s">"reconnect"</span><span class="pl-kos">,</span> <span class="pl-s1">error</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"正在重连："</span><span class="pl-kos">,</span> <span class="pl-s1">error</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-s1">wx</span><span class="pl-kos">.</span><span class="pl-en">showToast</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">icon</span>: <span class="pl-s">"none"</span><span class="pl-kos">,</span> <span class="pl-c1">title</span>: <span class="pl-s">"正在重连"</span><span class="pl-kos">,</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-s1">client</span><span class="pl-kos">.</span><span class="pl-en">on</span><span class="pl-kos">(</span><span class="pl-s">"error"</span><span class="pl-kos">,</span> <span class="pl-s1">error</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
    <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"连接失败："</span><span class="pl-kos">,</span> <span class="pl-s1">error</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-s1">wx</span><span class="pl-kos">.</span><span class="pl-en">showToast</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">icon</span>: <span class="pl-s">"none"</span><span class="pl-kos">,</span> <span class="pl-c1">title</span>: <span class="pl-s">"MQTT连接失败"</span><span class="pl-kos">,</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span></pre></div>
<h3>4 MQTT订阅</h3>
<p><strong>添加订阅</strong></p>
<div class="highlight highlight-source-js"><pre class="notranslate"><span class="pl-c">// 订阅一个主题</span>
<span class="pl-s1">client</span><span class="pl-kos">.</span><span class="pl-en">subscribe</span><span class="pl-kos">(</span><span class="pl-s">"想要订阅的主题名字"</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">qos</span>: <span class="pl-c1">0</span> <span class="pl-kos">}</span><span class="pl-kos">,</span> <span class="pl-k">function</span> <span class="pl-kos">(</span><span class="pl-s1">err</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-c1">!</span><span class="pl-s1">err</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"成功"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-s1">wx</span><span class="pl-kos">.</span><span class="pl-en">showToast</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">icon</span>: <span class="pl-s">"none"</span><span class="pl-kos">,</span> <span class="pl-c1">title</span>: <span class="pl-s">"添加成功"</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-c">// 可以在这里写一些订阅主题成功的逻辑</span>
  <span class="pl-kos">}</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p><strong>取消订阅</strong></p>
<div class="highlight highlight-source-js"><pre class="notranslate"><span class="pl-s1">client</span><span class="pl-kos">.</span><span class="pl-en">unsubscribe</span><span class="pl-kos">(</span><span class="pl-s">'想要取消的主题名字'</span><span class="pl-kos">,</span> <span class="pl-k">function</span> <span class="pl-kos">(</span><span class="pl-s1">err</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
  <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-c1">!</span><span class="pl-s1">err</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-s1">wx</span><span class="pl-kos">.</span><span class="pl-en">showToast</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">icon</span>: <span class="pl-s">"none"</span><span class="pl-kos">,</span> <span class="pl-c1">title</span>: <span class="pl-s">"取消成功"</span><span class="pl-kos">,</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span><span class="pl-s1">、</span>
    <span class="pl-c">// 可以在这里写一些取消主题成功的逻辑</span>
  <span class="pl-kos">}</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h3>5 MQTT发布</h3>
<div class="highlight highlight-source-js"><pre class="notranslate"><span class="pl-k">let</span> <span class="pl-s1">msg</span> <span class="pl-c1">=</span> <span class="pl-s">"发出的消息"</span><span class="pl-kos">;</span>
<span class="pl-s1">client</span><span class="pl-kos">.</span><span class="pl-en">publish</span><span class="pl-kos">(</span><span class="pl-s">"想要发送消息的Topic"</span><span class="pl-kos">,</span> <span class="pl-c1">JSON</span><span class="pl-kos">.</span><span class="pl-en">stringify</span><span class="pl-kos">(</span><span class="pl-s1">msg</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">qos</span>: <span class="pl-c1">0</span> <span class="pl-kos">}</span><span class="pl-kos">,</span> <span class="pl-s1">err</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-c1">!</span><span class="pl-s1">err</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"topic:"</span><span class="pl-kos">,</span> <span class="pl-s">"想要发送消息的Topic变量"</span><span class="pl-kos">,</span> <span class="pl-s">"成功发出消息"</span><span class="pl-kos">,</span> <span class="pl-s1">msg</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-kos">}</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h3>6 收到数据和数据回显</h3>
<div class="highlight highlight-source-js"><pre class="notranslate"><span class="pl-s1">client</span><span class="pl-kos">.</span><span class="pl-en">on</span><span class="pl-kos">(</span><span class="pl-s">"message"</span><span class="pl-kos">,</span> <span class="pl-kos">(</span><span class="pl-s1">topic</span><span class="pl-kos">,</span> <span class="pl-s1">message</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>
  <span class="pl-c">/* 温度、湿度、光强、烟雾</span>
<span class="pl-c">      TEMPERATURE</span>
<span class="pl-c">      HUMIDITY</span>
<span class="pl-c">      LIGHT_INTENSITY</span>
<span class="pl-c">      SMOKE</span>
<span class="pl-c">  */</span>
  <span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s">"topic:"</span><span class="pl-kos">,</span> <span class="pl-s1">topic</span><span class="pl-kos">,</span> <span class="pl-s">"收到消息："</span><span class="pl-kos">,</span> <span class="pl-s1">message</span><span class="pl-kos">.</span><span class="pl-en">toString</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-c">// wx.showToast({</span>
  <span class="pl-c">//   icon: "none",</span>
  <span class="pl-c">//   title: message.toString(),</span>
  <span class="pl-c">// });</span>
  <span class="pl-k">let</span> <span class="pl-s1">getMessageObj</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span><span class="pl-kos">}</span><span class="pl-kos">;</span> <span class="pl-c">//收到的消息</span>
  <span class="pl-s1">getMessageObj</span> <span class="pl-c1">=</span> <span class="pl-c1">JSON</span><span class="pl-kos">.</span><span class="pl-en">parse</span><span class="pl-kos">(</span><span class="pl-s1">message</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">//收到的消息转换成json对象</span>

  <span class="pl-c">// 这里可以简化语法 用于教学仅提供最基本的示例</span>
  <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">getMessageObj</span><span class="pl-kos">.</span><span class="pl-en">hasOwnProperty</span><span class="pl-kos">(</span><span class="pl-s">"TEMPERATURE"</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
    <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">setData</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
      <span class="pl-c">/*这里的sensorList为上面定义的传感器设备数据的数组 如果包含某项数据将更新那条数据 会自动刷新视图和百分比*/</span>
      <span class="pl-s">"sensorList[0].value"</span>: <span class="pl-s1">getMessageObj</span><span class="pl-kos">.</span><span class="pl-c1">TEMPERATURE</span> ? <span class="pl-v">Number</span><span class="pl-kos">(</span><span class="pl-s1">getMessageObj</span><span class="pl-kos">.</span><span class="pl-c1">TEMPERATURE</span><span class="pl-kos">)</span> : <span class="pl-c1">0</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">getMessageObj</span><span class="pl-kos">.</span><span class="pl-en">hasOwnProperty</span><span class="pl-kos">(</span><span class="pl-s">"HUMIDITY"</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
    <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">setData</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
      <span class="pl-s">"sensorList[1].value"</span>: <span class="pl-v">Number</span><span class="pl-kos">(</span><span class="pl-s1">getMessageObj</span><span class="pl-kos">.</span><span class="pl-c1">HUMIDITY</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">getMessageObj</span><span class="pl-kos">.</span><span class="pl-en">hasOwnProperty</span><span class="pl-kos">(</span><span class="pl-s">"LIGHT_INTENSITY"</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
    <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">setData</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
      <span class="pl-s">"sensorList[2].value"</span>: <span class="pl-v">Number</span><span class="pl-kos">(</span><span class="pl-s1">getMessageObj</span><span class="pl-kos">.</span><span class="pl-c1">LIGHT_INTENSITY</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">getMessageObj</span><span class="pl-kos">.</span><span class="pl-en">hasOwnProperty</span><span class="pl-kos">(</span><span class="pl-s">"SMOKE"</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
    <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">setData</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
      <span class="pl-s">"sensorList[3].value"</span>: <span class="pl-v">Number</span><span class="pl-kos">(</span><span class="pl-s1">getMessageObj</span><span class="pl-kos">.</span><span class="pl-c1">SMOKE</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">getMessageObj</span><span class="pl-kos">.</span><span class="pl-en">hasOwnProperty</span><span class="pl-kos">(</span><span class="pl-s">"CURATIN_PROGRESS"</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
    <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">setData</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
      <span class="pl-s">"otherSensorList[2].schedule"</span>: <span class="pl-v">Number</span><span class="pl-kos">(</span><span class="pl-s1">getMessageObj</span><span class="pl-kos">.</span><span class="pl-c1">CURATIN_PROGRESS</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h3>7 断开MQTT连接</h3>
<div class="highlight highlight-source-js"><pre class="notranslate"><span class="pl-s1">client</span><span class="pl-kos">?.</span><span class="pl-en">end</span><span class="pl-kos">(</span><span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-s1">error</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">client</span> <span class="pl-c1">=</span> <span class="pl-c1">null</span><span class="pl-kos">;</span></pre></div></div>
<div style="font-size:small;margin-top:8px;float:right;">转载请注明出处</div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">评论</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://OnHaiping.github.io/blogs">与君游~</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if("07/14/2024"!=""){
    var startSite=new Date("07/14/2024");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="网站运行"+diffDay+"天"+" • ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","OnHaiping/blogs");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="${IconList["copy"]}"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="${IconList["check"]}"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>
<script src='https://blog.meekdai.com/Gmeek/plugins/GmeekTOC.js'></script><script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'></script>

</html>
